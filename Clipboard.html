<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Global Text Paste</title>

<style>
  body {
    margin: 0;
    padding: 20px;
    background: #111;
    color: #fff;
    font-family: sans-serif;
  }

  textarea {
    width: 100%;
    min-height: 200px;
    font-size: 16px;
    padding: 12px;
    background: #1e1e1e;
    color: #fff;
    border: 1px solid #444;
    border-radius: 8px;
    resize: none;
    overflow: hidden;
    box-sizing: border-box;
  }
</style>
</head>

<body>

<h2>Clipboard</h2>
<textarea id="textBox" placeholder="Paste text here..."></textarea>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA5iLF-J-WvNaYm63r8rDZU8_rtZsgwYng",
    authDomain: "my-todo-2e111.firebaseapp.com",
    databaseURL: "https://my-todo-2e111-default-rtdb.firebaseio.com",
    projectId: "my-todo-2e111",
    storageBucket: "my-todo-2e111.appspot.com",
    messagingSenderId: "765517702108",
    appId: "1:7655176208:web:2dfe7d6205040cfd2ea519"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const textRef = ref(db, "globalText");

  const textarea = document.getElementById("textBox");

  // Auto resize function
  function autoResize() {
    textarea.style.height = "auto";
    textarea.style.height = textarea.scrollHeight + "px";
  }

  // Load text live
  onValue(textRef, (snapshot) => {
    const data = snapshot.val();
    if (data !== null && textarea.value !== data) {
      textarea.value = data;
      autoResize();
    }
  });

  // Save & resize on typing
  textarea.addEventListener("input", () => {
    set(textRef, textarea.value);
    autoResize();
  });

  // Resize on load
  autoResize();
</script>

</body>
</html>
